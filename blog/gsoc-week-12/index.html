<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8" /> <title> [GSoC 2016] CKEditor plugins - 12. week -Saša Nikolič </title> <meta http-equip="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="keywords" content="[GSoC 2016] CKEditor plugins - 12. week, Saša Nikolič, gsoc-2016,drupalplanet, gsoc, drupal, ckeditor plugins, translation"/> <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" /> <meta content="" property="fb:app_id" /> <meta content="Saša Nikolič" property="og:site_name" /> <meta content="[GSoC 2016] CKEditor plugins - 12. week" property="og:title" /> <meta content="article" property="og:type" /> <meta content="This is my window to the open internet world." property="og:description" /> <meta content="/blog/gsoc-week-12/" property="og:url" /> <meta content="2016-08-16T17:36:00+00:00" property="article:published_time" /> <meta content="/about/" property="article:author" /> <meta content="/assets/img/google-summer-of-code.png" property="og:image" /> <meta content="gsoc-2016" property="article:section" /> <!-- Twitter Cards --> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:title" content="[GSoC 2016] CKEditor plugins - 12. week" /> <meta name="twitter:url" content="/blog/gsoc-week-12/" /> <meta name="twitter:description" content="This is my window to the open internet world." /> <link rel="stylesheet" href="/assets/css/main.css" /> <!-- <link rel="stylesheet" href="/assets/css/custom-style.css" /> --> <link rel="stylesheet" href="/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" /> <link rel="stylesheet" href="/assets/bower_components/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css" /> <link rel="stylesheet" href="/assets/bower_components/icono/dist/icono.min.css" /> <!-- Fonts--> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet" /> <!-- Favicon --> <link rel="icon" href="/assets/img/favicon.ico" type="image/gif" sizes="16x16" /> <script> var base_url = '' ; </script> <!-- Jquery --> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous" ></script> <!-- <script src="/assets/bower_components/jquery/dist/jquery.min.js"></script> --> <script src="/assets/bower_components/jquery.easing/jquery.easing.min.js"></script> <script src="/assets/bower_components/bootstrap/dist/js/bootstrap.bundle.min.js"></script> <script src="/assets/bower_components/jquery-mousewheel/jquery.mousewheel.min.js"></script> <script src="/assets/bower_components/ghosthunter/dist/jquery.ghostHunter.min.js"></script> <script src="/assets/bower_components/lightgallery/dist/js/lightgallery-all.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script> <script src="/assets/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script> <script src="/assets/bower_components/nanobar/nanobar.min.js"></script> <script src="/assets/bower_components/typewrite/dist/typewrite.min.js"></script> <script src="/assets/js/search.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script> <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> <!-- for Mathjax support --> <!-- Github Button --> <script async defer src="https://buttons.github.io/buttons.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous" ></script> <!-- (you can remove the below scripts but do buy me a coffee to show some support :) --> <!-- buy me a coffeee --> <script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="sasanikolic90" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FF813F" data-position="right" data-x_margin="10" data-y_margin="10" ></script> <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]--> <!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> </head> <body> <nav class="navbar navbar-expand-lg fixed-top navbar-dark" id="topNav"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" > <span class="icono-hamburger" id="navbar-hamburger"> </span> </button> <a class="navbar-brand" href="/">Saša Nikolič</a> <div class="collapse navbar-collapse" id="navbarNav"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="/" >Home</a > </li> <li class="nav-item"> <a class="nav-link" href="/about" >About</a > </li> <li class="nav-item"> <a class="nav-link" href="/blog" >Blog</a > </li> <li class="nav-item"> <a class="nav-link" href="/contact" >Contact</a > </li> </ul> </div> <ul class="nav justify-content-end"> <li class="nav-item"> <a class="nav-link toggle-search-button" href="#search"> <i class="fa fa-search search-icon" aria-hidden="true"></i> </a> </li> <li class="nav-item"> <input class="nav-link switch" id="theme-toggle" onclick="modeSwitcher() " type="checkbox" name="checkbox" /> </li> </ul> </nav> <!-- Search Form --> <div class="search-form-container"> <form class="search-form"> <fieldset class="search-form__fieldset"> <div class="row"> <div class="col-lg-8 offset-md-2"> <input class="search-form__field" placeholder="Type to Search..." autofocus> <input class="search-form__submit" type="submit" value="search"> </div> </div> </fieldset> </form> <div class="row"> <div class="col-lg-8 offset-md-2 search-results"> <div class="card search-results"></div> </div> </div> <div class="close-search-button search-form-container__close"> <i class="fa fa-times icon"></i> </div> </div><div class="col-lg-12"> <div class="row" id="blog-post-container"> <div class="col-lg-8 offset-md-2"><article class="card" itemscope itemtype="http://schema.org/BlogPosting"> <div class="card-header"> <h1 class="post-title" itemprop="name headline">[GSoC 2016] CKEditor plugins - 12. week</h1> <h4 class="post-meta"></h4> <p class="post-summary"> Posted by : <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name"><a href="/blog/authors/sasanikolic">sasanikolic</a></span> </span > at <time datetime="2016-08-16 17:36:00 +0000" itemprop="datePublished" >Aug 16, 2016</time > </p> <span class="disqus-comment-count" data-disqus-identifier="/blog/gsoc-week-12/" ></span> <div class="post-categories"> Category : <a href="/blog/categories/gsoc-2016" >gsoc-2016</a > </div> </div> <div class="card-body" itemprop="articleBody"> <img class="card-img-top" src="/assets/img/google-summer-of-code.png" alt="" /> <br /> <br /> <p>This week marks the official end of my Google Summer of Code 2016 project. For the past 3 months I have been working hard on developing a rich and usable user experience for translators using the <a href="https://www.drupal.org/project/tmgmt">Translation Management Tool module</a> in Drupal 8. The main goal was to create two CKEditor plugins. The first plugin would convert text parts into segments to easily <em>segment the content</em> into smaller bits and enable easier translation management. It’s also connected with the <a href="https://www.drupal.org/sandbox/edurenye/2715815">Translation Memory</a>, to provide saved translation suggestions for requested segments. The second plugin is about <em>masking HTML tags</em> inside segments. This really helps to understand the structure better and cleanly show which opening/closing tags are missing inside a segment.</p> <p>I believe the goal was clearly reached quite some time ago. After that, we started implementing more functionality around these two main “pillars”. Users can now click through segments, which are clearly shown in both, the source and the translation editors, and check in the area below the editor for the translation suggestions. They can be used to replace the selected segment. Each segment can contain HTML tags, which are masked in the pre-process, before populating the content. They are displayed as <code class="language-plaintext highlighter-rouge">widgets</code>, as they can be clickable and draggable. If the translation is missing some tags, a warning message is displayed for awareness. When the translation seems to be fine, it can be marked as completed. This increases the counter of completed segments in the sticky division in the top right corner and colors the segment with a green background.</p> <p>All of the above currently works fine and more extra features will be added soon!</p> <h2 id="achievements">Achievements</h2> <p>I started last week as always, by working on the feedback that I got from my mentors on our weekly meeting. This mainly involved some UI fixes, like writing a cleaner validation text and displaying the missing tags not as just links, but with the same styling as the tags that are in the editor. I’ve also added a title for these missing tags, which is displayed when the user hovers the mouse pointer over them. This helps the user to understand that those are connected and when clicked, they can be placed at the cursor position inside the editor. Also to to save space for smaller screens and to tidy up the table with the translation suggestions in the area below the editor, we’re displaying just a more simple text inside the button - “Use” instead of “Use suggestion”. Another UI feature that I added on my mentor’s suggestion was to mark the active segment that has any missing tags with the red color to indicate it more strongly and clearly.</p> <p>Then I moved to the most important thing, the code cleanup, which I think was really needed. I was already using <a href="http://eslint.org/">ESLint</a> - a pluggable JavaScript linter, as a PhpStorm plugin extension, during the coding process which helped me a lot with the code quality, but I felt there could be done something more to run everything faster and cleaner.</p> <p>That is why I met with one friend of mine during the weekend and we spent some time reviewing hwo the plugins work and figuring out what could be done better. There were three main things that needed to be done:</p> <ul> <li>Split the bigger Javascript functions into many smaller ones when possible</li> <li>Check how often these functions are called and adjust their scope properly (if they are not called often, we can put them inside the scope of their parent function)</li> <li>Check for loops for better performance</li> </ul> <p>I have also added function comments based on the <a href="https://www.drupal.org/node/2183405">JavaScript API documentation</a> for Drupal and checked everything for the correct syntax (variable names, data types, tag orders…). I am sure the code is much more easier to read now for other developers in the community.</p> <p>While working on this, I found out some problems regarding JavaScript closure inside loops. This is related to the binding of of click events for adding the missing tags in the editor. This was an intriguing challenge, but <a href="http://stackoverflow.com/questions/8909652/adding-click-event-listeners-in-loop">Stack Overflow</a> was (as always) a really helpful source for finding a good working solution.</p> <p>I also spent quite some time trying to solve the issue regarding widget dragging inside the segments, which are defined as block elements, but still didn’t find any proper solution. I also tried to contact <a href="https://www.drupal.org/u/nod_">nod_</a> and <a href="https://www.drupal.org/u/wim-leers">Wim Leers</a>, but got no positive feedback. Any help from the community on that matter would be appreciated. :)</p> <p>Finally, I would like to make a quick overview of how to test my module, list the things that are working and things that are still missing and need work.</p> <p>How to test it:</p> <ul> <li>make sure you have all the dependencies (Translation Management Tool, Paragraphs, Translation Memory)</li> <li>install the module</li> <li>for now, only the predefined nodes from my module are working - a simple <code class="language-plaintext highlighter-rouge">Test for CKEditor plugins</code> and <code class="language-plaintext highlighter-rouge">Test for CKEditor plugins with paragraphs</code></li> <li>request a (german) translation of either one of those two</li> <li>enable plugins on translate/review page in the editor toolbar</li> <li>test it (and possibly send me some feedback)</li> </ul> <p>What works:</p> <ul> <li>dummy nodes for testing with new text format</li> <li>works on nodes with one or more editor pairs (paragraphs)</li> <li>masking and unmasking the HTML tags</li> <li>displaying the active segment in both editors</li> <li>translation memory querying</li> <li>displaying suggested translations from the memory</li> <li>using suggested translations - placing the selected one in the active editor</li> <li>validation of missing tags (globally and per segment)</li> <li>adding of missing tag</li> <li>set segments as completed</li> <li>masked tag dragging</li> </ul> <p>What is currently not working:</p> <ul> <li>text segmentation (in tmgmt_memory)</li> <li>saving segmented content properly, so that accepting translation does not save segments but initial content</li> <li>responsiveness</li> </ul> <p>Note, some of the “not-working” issues listed above are not on my side; either they are out of scope or from a related project.</p> <p>Another important thing that we should be aware of: this project provides a number of puzzle pieces towards providing translators and reviewers better tools to work with TMGMT. Many other things are needed until this fully works together with real content.</p> <p>My latest code can be found in my <a href="https://github.com/sasanikolic90/tmgmt_ckeditor">Github repository</a> and in my <a href="https://www.drupal.org/sandbox/sasanikolic/2737249">sandbox project</a>.</p> <h2 id="goals-for-next-week">Goals for next week</h2> <p>For this last week, I am planning to wrap up my project completely, update the documentation if needed and create issues for my sandbox.</p> <h2 id="conclusion">Conclusion</h2> <p>I am very thankful to my mentors <a href="https://www.drupal.org/u/miro_dietiker">Miro Dietiker</a> and <a href="https://www.drupal.org/u/berdir">Sascha Grossenbacher</a> for the constant supervision, guidance and support throughout this amazing experience. Our future plans involve making the initiated project fully functional in real world with true translations and real usage. When we will think that it is ready, it will be merged into the TMGMT module and I will actively maintain it.</p> <p>I would also like to thank Google for this great opportunity and the open-source community for the support with my project and for pushing technologies forward step by step, every day. During this summer I gained many technical and psychological skills. On one side I got to know myself better and while working remotely I gained a lot of self-discipline and motivation, on the other side it was a real challenge to study and learn JavaScript, together with the CKEditor API. I am sure all the skills gained will pay back someday!</p> <br /><!-- Load Facebook SDK for JavaScript --> <div id="fb-root"></div> <script> (function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"; fjs.parentNode.insertBefore(js, fjs); })(document, "script", "facebook-jssdk"); </script> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8" ></script> <div class="share-page"> <p class="share-text">Share this on &rarr;</p> <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-show-count="false" style="margin-top:5px;" >Tweet</a > <a class="fb-share-button" data-href="/blog/gsoc-week-12/" data-size="large" data-layout="button" >Share</a> </div><!-- Author box --> <div class="card"> <div class="card-header"> About Saša Nikolič </div> <div class="card-body"> <div class="row"> <div class="col-md-4"> <img class="author-profile-img" src="/assets/img/authors/sasa.png" alt="Saša Nikolič" /> </div> <div class="col-md-6"> <p class="author_bio">Web Developer. Occasionally, I write blogs and present publicly.</p> <p>Email : nikolic.sasa09@gmail.com</p> <p>Website : https://www.sasanikolic.com</p> <p class="profile-links"> <a class="social-link" href="https://github.com/sasanikolic90" target="_blank"><i class="fab fa-github fa-fw"></i></a> <a class="social-link" href="https://www.linkedin.com/in/saša-nikolič-62399992" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a> <a class="social-link" href="https://www.facebook.com/sasanikolic123" target="_blank"><i class="fab fa-facebook fa-fw"></i></a> <a class="social-link" href="https://www.twitter.com/sasanikolic90" target="_blank"><i class="fab fa-twitter fa-fw"></i></a> <a class="social-link" href="https://instagram.com/sasha.nklc" target="_blank"><i class="fab fa-instagram fa-fw"></i></a> </p> </div> </div> </div> </div> </div><!-- Incomment incase you want to use Disqus <div id="disqus_thread"></div> --> </article> <script> var disqus_config = function () { this.page.url = "/blog/gsoc-week-12/"; /* Replace PAGE_URL with your page's canonical URL variable */ this.page.identifier = "/blog/gsoc-ckeditor-plugins-12-week"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */ }; (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://sasanikolic.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript></div> </div> <div class="row"> <div class="col-md-4"> <div class="card"> <div class="card-header">About Saša Nikolič</div> <div class="card-body"> <p class="author_bio">I'm a Front-End Drupal Developer for MD Systems working remotely. I have serious passion for UI effects, animations and creating intuitive, dynamic user experiences. I love structure and order and I also stand for quality.</p> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Categories</div> <div class="card-body text-dark"> <div id="#gsoc-2016"></div> <li class="tag-head"> <a href="/blog/categories/gsoc-2016">gsoc-2016</a> </li> <a name="gsoc-2016"></a> <div id="#paragraphs"></div> <li class="tag-head"> <a href="/blog/categories/paragraphs">paragraphs</a> </li> <a name="paragraphs"></a> <div id="#tech-2021"></div> <li class="tag-head"> <a href="/blog/categories/tech-2021">tech-2021</a> </li> <a name="tech-2021"></a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Useful Links</div> <div class="card-body text-dark"> <li> <a href="/">Home</a> </li> <li> <a href="/about">About</a> </li> <li> <a href="/blog">Blog</a> </li> <li> <a href="/contact">Contact</a> </li> </div> </div> </div> </div> </div><footer> <p> Powered by <a href="https://github.com/sujaykundu777/devlopr-jekyll"> devlopr jekyll</a>. Subscribe via <a href=" /feed.xml ">RSS</a>.</p> </footer> <script> var options = { classname: 'my-class', id: 'my-id' }; var nanobar = new Nanobar( options ); nanobar.go( 30 ); nanobar.go( 76 ); nanobar.go(100); </script> <div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div> <script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script> <script src="/assets/js/mode-switcher.js"></script> <script> if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); } </script> </body> </html>
